## 需求文档

### 介绍

基于《正仁小程序》设计稿复刻现有司法鉴定小程序的整体 UI 与交互，统一采用红白主色调的品牌风格，并配套云函数支撑的业务能力（如预约提交、案例查询）。

### 需求

#### 需求 1 - 首页与导航体系

**用户故事：** 作为一名用户，我希望在首页快速了解正仁司法鉴定的业务范围、公告资讯和联系方式，以便选择需要的服务并导航到对应页面。

**验收标准：**

1. While 用户打开小程序时, when 首页加载完成, the 小程序 shall 显示顶部深红色渐变标题栏、横幅告示、四个快捷服务入口（智能检测、鉴定预约、案例查询、关于我们）以及下方公告列表。
2. When 用户点击快捷服务入口时, the 小程序 shall 导航到对应的功能页并保持底部 TabBar 状态同步。
3. While 页面滚动时, when 内容超过一屏, the 小程序 shall 维持悬浮“联系我们”卡片和固定底部 TabBar 可见。

#### 需求 2 - 鉴定预约功能

**用户故事：** 作为一名客户，我希望在线填写鉴定预约信息并提交，以便工作人员后续联系。

**验收标准：**

1. When 用户进入“鉴定预约”页面时, the 小程序 shall 展示带占位提示的姓名、电话、身份证号、案件类型、预约时间、备注等输入项，并使用品牌风格的提交按钮。
2. While 用户填写表单完成并点击“提交预约”时, when 校验通过, the 小程序 shall 调用云函数 `createAppointment` 写入云数据库并提示提交成功。
3. When 表单校验失败（如手机号格式错误、必填项缺失）时, the 小程序 shall 阻止提交并显示错误提示。

#### 需求 3 - 案例查询模块

**用户故事：** 作为一名委托人，我希望查询我的鉴定案例进度并查看详情。

**验收标准：**

1. When 用户进入“案例查询”页面时, the 小程序 shall 展示按案件类型分栏的列表及搜索框。
2. When 用户提交查询（输入案件编号或身份证号）时, the 小程序 shall 调用云函数 `queryCases` 返回匹配结果并按设计稿显示卡片列表。
3. While 用户点击案例卡片时, when 数据存在, the 小程序 shall 展示详情页，包含委托人信息、案件状态、时间线、进度步骤等信息。

#### 需求 4 - 关于我们与团队展示

**用户故事：** 作为潜在客户，我希望了解机构资质、荣誉及团队结构以建立信任。

**验收标准：**

1. When 用户访问“关于我们”页时, the 小程序 shall 显示机构简介、资质证书图片、硬件环境照片以及组织架构图。
2. While 用户滚动页面时, when 内容包含图片, the 小程序 shall 支持点击预览图片原图。
3. When 用户点击底部联系方式区域时, the 小程序 shall 提供拨打电话、导航或复制邮箱等操作。

#### 需求 5 - 统一视觉规范

**用户故事：** 作为产品负责人，我希望全站视觉风格统一，与 PDF 设计保持一致。

**验收标准：**

1. When 渲染任一页面时, the 小程序 shall 使用主色 `#9C0B0B`、辅色 `#C71E1E`、背景色 `#F6F6F6`、文本色 `#1A1A1A/#666666`，按钮与图标遵循设计稿圆角与阴影规范。
2. While 组件存在于多个页面（如顶部导航、底部 TabBar）, when 使用, the 小程序 shall 通过可复用组件或样式保持一致性。
3. When 适配常见机型（375–414px 宽度）时, the 小程序 shall 保持布局不溢出且保证重要模块在首屏可视区域内。

#### 需求 6 - 后台运营支撑

**用户故事：** 作为客服人员，我希望通过云函数读取预约和案例数据，以便在后台管理。

**验收标准：**

1. When 云函数 `createAppointment` 被调用时, the 云函数 shall 将数据写入 `appointments` 集合并返回写入结果。
2. When 云函数 `queryCases` 被调用时, the 云函数 shall 从 `cases` 集合按条件查询并返回结果列表。
3. While 云函数执行失败时, when 发生异常, the 云函数 shall 记录日志并返回错误信息供前端提示。

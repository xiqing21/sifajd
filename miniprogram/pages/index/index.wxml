<scroll-view class="index-scroll" scroll-y enable-flex>
  <view class="hero-wrapper">
    <text class="hero-title">正仁司法鉴定中心</text>
  </view>

  <view class="index-body">
    <view class="search-card">
      <view class="search-bar">
        <text class="search-icon">🔍</text>
        <input
          class="search-input"
          value="{{searchKeyword}}"
          placeholder="搜索业务关键词，如“亲缘鉴定”"
          confirm-type="search"
          bindinput="handleSearchInput"
          bindconfirm="handleSearchConfirm"
        />
        <view wx:if="{{searchKeyword}}" class="search-clear" bindtap="handleClearSearch">✕</view>
      </view>
      <text class="search-tip">输入业务关键词快速定位所需鉴定项目</text>
    </view>

    <view class="card marquee-card" bindtap="handleNoticeTap">
      <view class="card-head">
        <text class="card-title">鉴定公告</text>
        <text class="card-subtitle">最新通知文字流动展示</text>
      </view>
      <view class="marquee-container">
        <swiper
          class="marquee-swiper"
          vertical
          autoplay
          circular
          interval="3200"
          duration="600"
          easing-function="easeInOutCubic"
          bindchange="handleNoticeChange"
        >
          <swiper-item wx:for="{{notices}}" wx:key="id">
            <view class="marquee-item">
              <text class="marquee-date">{{item.publishDate}}</text>
              <text class="marquee-content">{{item.title}}</text>
            </view>
          </swiper-item>
        </swiper>
      </view>
    </view>

    <view class="card highlight-card">
      <view class="card-head">
        <text class="card-title">选择我们的理由</text>
      </view>
      <view class="highlight-list">
        <view class="highlight-item" wx:for="{{highlights}}" wx:key="item">
          <text class="highlight-index">0{{index + 1}}</text>
          <text class="highlight-text">{{item}}</text>
        </view>
      </view>
    </view>

    <view class="card service-card">
      <view class="card-head">
        <text class="card-title">业务速览</text>
        <text class="card-subtitle">覆盖鉴定全链条 · 多学科协同</text>
      </view>
      <view class="service-result">共 {{filteredServices.length}} 个匹配项目</view>
      <view wx:if="{{filteredServices.length}}" class="service-list">
        <view class="service-item" wx:for="{{filteredServices}}" wx:key="name">
          <view class="service-item__info">
            <text class="service-item__name">{{item.name}}</text>
            <text class="service-item__desc">{{item.description}}</text>
            <view class="service-item__keywords">
              <view class="service-item__tag" wx:for="{{item.keywords}}" wx:key="keyword">{{item}}</view>
            </view>
          </view>
        </view>
      </view>
      <view wx:else class="service-empty">暂无匹配项目，请尝试其他关键词。</view>
    </view>

    <view class="card guide-card">
      <view class="card-head">
        <text class="card-title">鉴定流程</text>
        <text class="card-subtitle">专人陪同 · 透明可追溯</text>
      </view>
      <view class="guide-steps">
        <view class="guide-step" wx:for="{{guideSteps}}" wx:key="title">
          <view class="guide-step__badge">{{index + 1}}</view>
          <view class="guide-step__content">
            <text class="guide-step__title">{{item.title}}</text>
            <text class="guide-step__desc">{{item.desc}}</text>
          </view>
        </view>
      </view>
    </view>

    <view class="page-footer">山西省司法厅核准 · 司法鉴定许可证证号：140118167</view>
    <view class="scroll-space"></view>
  </view>
</scroll-view>
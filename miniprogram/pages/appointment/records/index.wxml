<scroll-view class="records-scroll" scroll-y enable-flex refresher-enabled="true" refresher-triggered="{{loading}}" bindrefresherrefresh="handleRefresh">
  <view class="records-header">
    <text class="records-title">æˆ‘çš„é¢„çº¦</text>
    <text class="records-subtitle">æŸ¥çœ‹é¢„çº¦è®°å½•ä¸å¤„ç†è¿›åº¦</text>
  </view>

  <view class="records-body">
    <view wx:if="{{!loading && !records.length}}" class="empty-state">
      <view class="empty-icon">ğŸ“„</view>
      <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•ï¼Œå…ˆå»é¢„çº¦å§ï½</text>
      <button class="empty-button" bindtap="goAppointment">ç«‹å³é¢„çº¦</button>
    </view>

    <view wx:for="{{records}}" wx:for-item="record" wx:key="id" class="record-card">
      <view class="record-card__head">
        <view class="record-status">{{record.status}}</view>
        <text class="record-time">{{record.createdAt}}</text>
      </view>
      <view class="record-info">
        <view class="record-row">
          <text class="label">å§“å</text>
          <text class="value">{{record.name}}</text>
        </view>
        <view class="record-row">
          <text class="label">è”ç³»æ–¹å¼</text>
          <text class="value">{{record.phone}}</text>
        </view>
        <view class="record-row">
          <text class="label">é‰´å®šç±»å‹</text>
          <text class="value">{{record.caseType}}</text>
        </view>
        <view class="record-row">
          <text class="label">é¢„çº¦æ—¶é—´</text>
          <text class="value">{{record.appointmentDate}} {{record.appointmentTime}}</text>
        </view>
        <view wx:if="{{record.remarks}}" class="record-row">
          <text class="label">å¤‡æ³¨</text>
          <text class="value">{{record.remarks}}</text>
        </view>
      </view>

      <view wx:if="{{record.timeline && record.timeline.length}}" class="record-timeline">
        <view wx:for="{{record.timeline}}" wx:for-item="node" wx:key="title" class="timeline-item">
          <view class="timeline-dot {{node.finished ? 'timeline-dot--done' : ''}}"></view>
          <view class="timeline-content">
            <text class="timeline-title">{{node.title}}</text>
            <text class="timeline-desc">{{node.desc}}</text>
            <text wx:if="{{node.timestamp}}" class="timeline-time">{{node.timestamp}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="scroll-space"></view>
</scroll-view>
